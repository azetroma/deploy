<menu-container open-menu-name="openMenuName">

    <menu-item>
        <menu-header>{{ 'تنظیمات کلی' | translate }}</menu-header>
        <menu-body>
            <div>
                <input type="hidden" data-prop="canExportXlsx" value="false" />
                <div class="form-row" layout="row" layout-align="start center">
                    <label class="col-sm-4">{{ 'نوع کنترل' | translate }}</label>
                    <span class="form-divider" flex></span><div class="col-sm-8">
                        <select class="selectpicker-x form-control" ng-change="ngModel.userControl.info.variableDefault=null; refreshChart('refresh');" ng-model="ngModel.userControl.info.type">
                            <option value="combo">{{ 'کشویی تک مقداری' | translate }}</option>
                            <option value="multi">{{ 'کشویی چند مقداری' | translate }}</option>
                            <!--<option value="multi-filter" >{{ 'چند مقداری فیلتر شدنی' | translate }}</option>-->
                            <option value="datepicker">{{ 'تاریخ' | translate }}</option>
                            <option value="datepicker-range">{{ 'محدوده تاریخ' | translate }}</option>
                            <option value="slider">{{ 'لغزنده' | translate }}</option>
                            <option value="text">{{ 'جستجو' | translate }}</option>
                        </select>
                    </div>
                </div>

                <div class="form-row" layout="row" layout-align="start center">
                    <label class="col-sm-4">{{ 'برچسب' | translate }}</label>
                    <span class="form-divider" flex></span><div class="col-sm-8">
                        <input type="text" class="form-control" placeholder="{{ 'برچسب' | translate }}" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.label" ng-model-options="{ updateOn: 'blur' }" />
                    </div>
                </div>


                <input type="hidden" data-prop="aggregation" value="1" />
                <input type="hidden" data-prop="showFilterIcon" value="0" />

                <div ng-show="ngModel.userControl.info.type=='combo' || ngModel.userControl.info.type=='multi'">
                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'حالت نمایش' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <select class=" selectpicker-x form-control" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.comboStyle">
                                <option value="bootstrap" selected="selected">حالت 1</option>
                                <option value="default">{{ 'پیش فرض مرورگر' | translate }}</option>
                            </select>
                        </div>
                    </div>

                </div>

                <div class="" ng-show="ngModel.userControl.info.type=='datepicker' || ngModel.userControl.info.type=='datepicker-range'">
                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'فرمت نمایش تاریخ' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <input class="form-control" type="text" value="yy/mm/dd" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.dateFormatShow" ng-model-options="{ updateOn: 'blur' }" />
                            <!--<select class=" selectpicker-x form-control"  ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.dateFormatShow">
                                <option value="yy/mm/dd">yy/mm/dd</option>
                                <option value="dd/mm/yy">dd/mm/yy</option>
                                <option value="d MM yy">d MM yy</option>
                                <option value="DD d MM yy">DD d MM yy</option>
                            </select>-->
                        </div>
                    </div>

                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'فرمت مقدار تاریخ' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <input class="form-control" type="text" value="yy/mm/dd" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.dateFormatValue" ng-model-options="{ updateOn: 'blur' }" />
                        </div>
                    </div>

                    <div ng-show="ngModel.userControl.info.type=='datepicker'">
                        <div class="form-row" layout="row" layout-align="start center">
                            <label class="col-sm-4">{{ 'شرط' | translate }}</label>
                            <span class="form-divider" flex></span><div class="col-sm-8">
                                <select class=" selectpicker-x form-control" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.dateOp">
                                    <option value="gr">{{ 'بزرگتر' | translate }}</option>
                                    <option value="eqgr">{{ 'بزرگتر مساوی' | translate }}</option>
                                    <option value="ls">{{ 'کوچکتر' | translate }}</option>
                                    <option value="eqls">{{ 'کوچکتر مساوی' | translate }}</option>
                                    <option value="eq">{{ 'برابر' | translate }}</option>
                                    <option value="nteq">{{ 'نابرابر' | translate }}</option>
                                </select>
                            </div>
                        </div>


                    </div>
                </div>

                <div class="" ng-show="ngModel.userControl.info.type=='text'">
                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'عملوند' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <select class=" selectpicker-x form-control" ng-change="ngModel.userControl.info.variableDefault.values[1] = ngModel.userControl.info.textOperand" ng-model="ngModel.userControl.info.textOperand">
                                <option value="and">AND</option>
                                <option value="or">OR</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="" ng-show="ngModel.userControl.info.type=='slider'">
                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'حالت اسلایدر' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <select class=" selectpicker-x form-control" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.sliderRange">
                                <option value="min">{{ 'کاهشی' | translate }}</option>
                                <option value="max">{{ 'افزایشی' | translate }}</option>
                                <option value="min-max">{{ 'افزایشی کاهشی' | translate }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'حداقل' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <input type="text" class="form-control" placeholder="{{ 'برچسب' | translate }}" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.sliderMin" ng-model-options="{ updateOn: 'blur' }" />
                        </div>
                    </div>

                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'حداکثر' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <input type="text" class="form-control" placeholder="{{ 'برچسب' | translate }}" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.sliderMax" ng-model-options="{ updateOn: 'blur' }" />
                        </div>
                    </div>

                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">{{ 'فرمت نمایش اعداد' | translate }}</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <select class=" selectpicker-x form-control" ng-change="refreshChart('refresh')" ng-model="ngModel.userControl.info.sliderFormat">
                                <option value="A">{{ 'عادی' | translate }}</option>
                                <option value="%">{{ 'درصد' | translate }}</option>
                                <option value=",.0f">#,#</option>
                                <option value=",.1f">#,#.0</option>
                                <option value=",.2f">#,#.00</option>
                            </select>
                        </div>
                    </div>


                </div>

            </div>
        </menu-body>
    </menu-item>

    <menu-item ng-show="ngModel.series && ngModel.series.length>0" name="series">
        <menu-header>{{ 'مشخصات شاخص‌ها' | translate }}</menu-header>
        <menu-body>
            <div>
                <div class="form-row" layout="row" layout-align="start center">
                    <label class="col-sm-4">{{ 'شاخص' | translate }}</label>
                    <span class="form-divider" flex></span><div class="col-sm-8">
                        <select class="selectpicker-x form-control" ng-model="ngModel.selectedSeries">
                            <option ng-repeat="i in ngModel.series" value="{{i}}">{{i}} </option>
                        </select>
                    </div>
                </div>

                <div class="form-group single-segment">
                    <label class="col-sm-4">{{ 'استفاده بعنوان' | translate }}</label>
                    <span class="form-divider" flex></span><div class="col-sm-8">
                        <div class="btn-group btn-group-justified" data-toggle="buttons">
                            <!--<label class="btn btn-default active" style="padding: 6px 0; font-size: 0.8em">{{ 'مقدار' | translate }}<input type="radio" value="value" data-prop="type" name="fieldType" checked="checked">
                            </label>
                            <label class="btn btn-default" style="padding: 6px 0; font-size: 0.8em">{{ 'برچسب' | translate }}<input type="radio" value="name" data-prop="type" name="fieldType">
                            </label>-->

                            <label class="btn btn-default" style="padding: 6px 0; font-size: 0.8em"
                                   ng-class="ngModel.userControl.series[ngModel.selectedSeries].type==i.t?'active':''"
                                   ng-repeat="i in [{t:'value', n:'مقدار'}, {t:'name', n:'برچسب'}]"
                                   ng-click="ngModel.userControl.series[ngModel.selectedSeries].type=i.t;refreshChart('refresh')">

                                {{i.n}}
                            </label>

                        </div>
                    </div>
                </div>

            </div>
        </menu-body>
    </menu-item>

    <user-control-variable-relation prop="ngModel" data-selector="#divChart" dimensions="dimensions">   </user-control-variable-relation>

    <dim-meas-where model="openMenuName" ng-if="!isOlap" dimensions="dimensions" measures="measures" where="where" datasource="datasource"></dim-meas-where>

    <filter-except related-datasource-list="relatedDatasourceList" filter-exception="filterException" datasource="datasource"></filter-except>
    <calculate-fields calculated-fields="calculatedFields"></calculate-fields>
</menu-container>
