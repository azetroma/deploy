
<menu-item class="panel ">
    <menu-header>{{ 'ارتباط با متغیر' | translate }}</menu-header>
    <menu-body>
        <div>
            <div>
                <div class="gb-progress" ng-hide="list">
                    <img width="18" height="18" src="Images/progress.gif" />{{ 'در حال بارگذاری' | translate }}
                </div>

                <div class="form-row" layout="row" layout-align="start center" ng-show="list">
                    <label class="col-sm-4">{{ 'ارتباط با متغیر' | translate }}</label>
                    <span class="form-divider" flex></span>
                    <div class="col-sm-8 ">
                        <select class="form-control"
                                ng-model="prop.userControl.info.variableId"
                                ng-options="i.Id+'' as i.Name for i in list"></select>
                    </div>
                </div>

                <div class="form-row" layout="row" layout-align="start center">
                    <label class="col-sm-4">{{ 'پیش فرض براساس' | translate }}</label>
                    <span class="form-divider" flex>
                    </span><div class="col-sm-8">
                        <select ng-model="prop.userControl.info.variableDefaultFunction">
                            <option value="GetDate">{{ 'زمان حال' | translate }}</option>
                            <option value="MonthToDate">{{ 'از ابتدای ماه تا کنون' | translate }}</option>
                            <option value="YearToDate">{{ 'از ابتدای سال تا کنون' | translate }}</option>
                            <option value="DaysAgo">{{ 'تعداد روز قبل' | translate }}</option>
                            <option value="MonthAgo">{{ 'تعداد ماه قبل' | translate }}</option>
                            <option value="NONE">{{'custom_value' | translate}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-row" layout="row" layout-align="start center" ng-show="prop.userControl.info.variableDefaultFunction=='NONE'">
                    <label class="col-sm-4">{{ 'مقدار پیش‌فرض' | translate }}</label>
                    <span class="form-divider" flex></span><div class="col-sm-8">
                        <code class="default-value code" ng-bind="prop.userControl.info.variableDefault.values" />
                        <span class="glyphicon glyphicon-trash pointer icon-btn" style="top:7px;" ng-click="prop.userControl.info.variableDefault=null"></span>
                    </div>
                </div>

                <div class="form-row" layout="row" layout-align="start center" ng-show="(['GetDate','MonthToDate','YearToDate','DaysAgo','MonthAgo']).indexOf(prop.userControl.info.variableDefaultFunction)!=-1">
                    <label class="col-sm-4">{{ 'فرمت تاریخ تابع زمان حال' | translate }}</label>
                    <span class="form-divider" flex></span><div class="col-sm-8">
                        <input class="form-control" id="getDateFormat" type="text" value="yy/mm/dd" ng-model="prop.userControl.info.functionDateFormat" />
                    </div>
                </div>
                <div class="" ng-show="(['DaysAgo','MonthAgo']).indexOf(prop.userControl.info.variableDefaultFunction)!=-1">
                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">از تعداد {{prop.userControl.info.variableDefaultFunction=='DaysAgo'? 'روز' : 'ماه'}} قبل</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <input class="form-control" id="getDateFormat" type="number" value="1" ng-model="prop.userControl.info.functionUnitAgo" />
                        </div>
                    </div>
                    <div class="" ng-show="(['MonthAgo']).indexOf(prop.userControl.info.variableDefaultFunction)!=-1">
                        <div class="form-row" layout="row" layout-align="start center">
                            <label class="col-sm-4">{{ 'چندمین روز' | translate }}</label>
                            <span class="form-divider" flex></span><div class="col-sm-8">
                                <input class="form-control" id="getDateFormat" type="text" value="1" ng-model="prop.userControl.info.functionUnitAgoOffset" />
                            </div>
                        </div>
                    </div>


                    <div class="form-row" layout="row" layout-align="start center">
                        <label class="col-sm-4">تا تعداد {{prop.userControl.info.variableDefaultFunction=='DaysAgo'? 'روز' : 'ماه'}} قبل</label>
                        <span class="form-divider" flex></span><div class="col-sm-8">
                            <input class="form-control" id="getDateFormat" type="number" value="1" ng-model="prop.userControl.info.functionUnitAgoTwo" />
                        </div>
                    </div>

                    <div class="" ng-show="(['MonthAgo']).indexOf(prop.userControl.info.variableDefaultFunction)!=-1">
                        <div class="form-row" layout="row" layout-align="start center">
                            <label class="col-sm-4">{{ 'چندمین روز' | translate }}</label>
                            <span class="form-divider" flex></span><div class="col-sm-8">
                                <input class="form-control" id="getDateFormat" type="text" value="1" ng-model="prop.userControl.info.functionUnitAgoTwoOffset" />
                            </div>


                        </div>
                        <p class="help-block well">
                            <small>
                                روز اول ماه با ۱ و روز آخر ماه با -۱ مشخص می‌شود.
                                امروز نیز با علامت
                                @
                                مشخص می‌شود. برای مثال دو روز قبل از امروز را به صورت @-2 نشان می‌دهیم.
                            </small>
                        </p>

                    </div>

                </div>





            </div>

            <div class="form-group gb-content">
                <a class="pointer new-gb-btn" ng-click="AddGlobalVariables()">{{ 'ساخت متغیر جدید' | translate }}</a>
            </div>
        </div>
    </menu-body>
</menu-item>
