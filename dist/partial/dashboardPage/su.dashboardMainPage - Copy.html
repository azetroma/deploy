
<div class="ui secondary menu ng-scope">
    <div class="right menu">
        <div class="item">
            <div class="ui icon input " ng-class="{loading:searchProgress}">
                <input type="text" placeholder="جستجو..." ng-model="query" ng-change="search(query)" ng-model-options="{ debounce: 600 }" class="ng-pristine ng-valid ng-empty ng-touched">
                <i class="search icon"></i>
            </div>
        </div>
        <a class="item" ng-if="isAdmin" ng-click="add()"><i class="icon add"></i> اضافه کردن پروژه جدید </a>


        <div class="ui icon right dropdown item userinfo" tabindex="0">
            <i class="icon large user outline"></i>
            <div class="menu" tabindex="-1">
                <div class="disabled item ng-binding">{{gApp.userInfo.name}}</div>
                <a class="item" href="{{gApp.urlPrefix}}sadaf/management"><i class="icon cog"></i>{{'مدیریت' | translate}}</a>
                <a class="item" href="{{gApp.urlPrefix}}account/logoff"><i class="icon sign out"></i>{{'signout' | translate}}</a>
            </div>
        </div>
    </div>
</div>

<div ng-show="searchResult.length || query.length">
    <div class="ui segments">
        <div class="ui segment" ng-repeat="r in searchResult">
            <a href="/#/app/{{r.order}}/dashboard/{{+r.id}}">{{r.name}}</a>
        </div>
    </div>
    <div ng-show="!searchResult.length && query.length">نتیجه‌ای یافت نشد</div>
</div>

<div class="ui four stackable cards" ng-hide="searchResult.length || query.length">
    <div class="ui card app-{{app.id}}" ng-repeat="app in apps">

        <!--<a class="image" href="/#/app/{{app.id}}/dashboard/{{+app.first}}">
            <img class="ui wireframe image" src="{{gApp.urlPrefix}}Images/card-1.png" />
        </a>-->
        <a href="/#/app/{{app.id}}/dashboard/{{+app.first}}" style="height: 250px;display: flex;justify-content: center;align-items: center;" ng-style="{'background-image': 'radial-gradient(circle, '+app.detail.startColor+', '+app.detail.endColor+')'}">
            <img style="width:70%;" class="ui image" ng-src="{{app.detail.pic}}" />
        </a>
        <div class="content">
            <a class="header" ng-hide="app.edit" href="/#/app/{{app.id}}/dashboard/{{+app.first}}">{{app.name}}</a>

            <div class="ui icon input" ng-class="{loading:app.progress}" ng-show="app.edit">
                <input type="text" id="new-label" placeholder="نام" ng-model="app.name" ng-keyup="keyup($event, app)" xng-blur="save(app)">
                <i class="icon"></i>
            </div>

            <div class="description" ng-hide="app.edit" style="min-height:4em">
                {{app.detail.desc}}
                <!--<i class="ui pointer small icon edit" style="color:#e0e0e0;" ng-click="editDesc(app)" ng-hide="app.editDesc"></i>-->
            </div>
            <span class="ui icon input" ng-class="{loading:app.progress}" ng-show="app.edit">
                <textarea rows="5" type="text" id="new-label" placeholder="توضیحات" ng-model="app.detail.desc" ng-keyup="keyup($event, app)" xng-blur="save(app)" style="width:100%"></textarea>
            </span>

        </div>

        <div class="extra" ng-if="isAdmin">
            <span class=" ">
                <i class="link mini pencil alternate icon" ng-click="edit(app)" ng-hide="app.edit"></i>
                <i class="check link icon" ng-click="save(app)" ng-class="{disabled:app.progress}" ng-show="app.edit"></i>
            </span>
            <span class=" ">
                <i class="link mini trash alternate outline icon" ng-click="remove(app, $index)"></i>
                <i class="link mini cog icon popup-btn" ng-click="settings(app, $index)"></i>
            </span>
        </div>

        <div class="setting-popup ui wide basic popup top left transition hidden" style="min-width:200px">
            <div class="ui form">

                <div class="field">
                    <label>رنگ شروع</label>
                    <input ng-model="app.detail.startColor" />
                </div>

                <div class="field">
                    <label>رنگ پایان</label>
                    <input ng-model="app.detail.endColor" />
                </div>
                <div class="field">
                    <label>انتخاب آیکن</label>
                <input type="file" ng-model="app.pic" index="{{$index}}" onchange="angular.element(this).scope().previewFile(this )">
                </div>

            </div>
        </div>

    </div>

    <!--<div class="ui card" ng-click="add()">
        <div class="content">
            <i class="ui icon huge add"></i>
        </div>
    </div>-->
</div>

