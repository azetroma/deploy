<!-- تنظیمات مربوط به کنترل‌ها -->
<div ng-show="c.control.active.name" class="ui tiny form">
    <div class="fields">
        <div class="field"><label>شناسه فیلد</label></div>
        <span class="field" ng-show="c.control.active.name"> {{c.control.active.name}}</span>

    </div>
     
    <div class="field">
        <label>نام فیلد در جدول</label>
        <input ng-model="c.control.active.columnName" placeholder="برچسب" ng-model-options="{ updateOn: 'blur' }" ng-change="c.checkColumnName(c.control.active, '{{c.control.active.columnName}}')">
    </div> 

    <div class="field">
        <label>نام</label>
        <input ng-model="c.control.active.label" placeholder="برچسب">
    </div>

    <div class="field">
        <textarea ng-model="c.control.active.description" placeholder="توضیحات" rows="2"></textarea>
    </div>

    <div class="field" ng-show="c.control.active.value || c.control.active.dropdown.listValue.length">
        <small class="gray">
            {{c.control.active.value}} {{c.control.active.dropdown.listValue.join(', ')}}
            <i class="icon remove" ng-click="c.control.active.value = null; c.control.active.dropdown.listValue = null;"></i>
        </small>
    </div>

    <div class="inline fields " ng-hide="c.control.active.childOfMultiRow || c.control.active.dontShowColumnSize">
        <label>تعداد ستون</label>
        <sm-dropdown class="scrolling" items="[
                             {k:'twelve',v:'12' },
                             {k:'eleven',v:'11' },
                             {k:'ten',v:'10' },
                             {k:'nine',v:'9' },
                             {k:'eight',v:'8' },
                             {k:'seven',v:'7' },
                             {k:'six',v:'6' },
                             {k:'five',v:'5' },
                             {k:'four',v:'4' },
                             {k:'three',v:'3' },
                             {k:'two',v:'2' },
                             {k:'one',v:'1' }
                             ]" model="c.control.active.columnClass" label="item.v" value="item.k"></sm-dropdown>
        <span style="margin:0 10px;"> از ۱۲ ستون</span>
    </div>

    <div class="field" ng-show="c.controlProperty(c.control.active).require">
        <sadaf-checkbox ng-model="c.control.active.validations.isRequire">
            {{'الزامی بودن' | translate}}
        </sadaf-checkbox>
    </div>

    <div class="field" ng-hide="c.control.active.dontShowHide">
        <sadaf-checkbox ng-model="c.control.active.hidden">مخفی کردن</sadaf-checkbox>
    </div>



    <div class="field" ng-show="c.controlProperty(c.control.active).showUniqueProp">
        <sadaf-checkbox ng-model="c.control.active.validations.enforceUnique">
            {{'یکتا بودن' | translate}}
        </sadaf-checkbox>
    </div>


    <div class="fields" ng-show="c.control.active.type == 2" style="margin-bottom: 0;">
        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.validations.autoIncrement">
                {{'افزایش خودکار' | translate}}
            </sadaf-checkbox>
        </div>

        <div class="field" ng-show="c.control.active.validations.autoIncrement">
            <input ng-model="c.control.active.validations.autoIncrementSeed" placeholder="مقدار شروع">
        </div>
    </div>

    <div class="field" ng-show="c.controlProperty(c.control.active).default">
        <sadaf-checkbox ng-model="c.control.active.hasDefault">داشتن مقدار پیش فرض</sadaf-checkbox>
    </div>

    <div class="field" ng-show="c.controlProperty(c.control.active).default && c.control.active.hasDefault">
        <input ng-model="c.control.active.defaultValue" placeholder="مقدار پیش فرض">
    </div>

    <div class="field" ng-show="c.control.active.type == 1 || c.control.active.type == 0 || c.control.active.type == 2">
        <sadaf-checkbox ng-model="c.control.active.validations.checkLen">محدودیت طول</sadaf-checkbox>
    </div>

    <div class="field" ng-show="c.control.active.validations.checkLen">
        <input ng-model="c.control.active.validations.minLen" placeholder="کمترین طول">
    </div>

    <div class="field" ng-show="c.control.active.validations.checkLen">
        <input ng-model="c.control.active.validations.maxLen" placeholder="بیشترین طول">
    </div>

    <div class="field" ng-show="c.control.active.type == 2">
        <sadaf-checkbox ng-model="c.control.active.validations.checkNumber">
            <span>محدودیت مقدار</span>
        </sadaf-checkbox>
    </div>
    <div class="field" ng-show="c.control.active.validations.checkNumber">
        <input ng-model="c.control.active.validations.minNumber" placeholder="کمترین مقدار">
    </div>

    <div class="field" ng-show="c.control.active.validations.checkNumber">
        <input ng-model="c.control.active.validations.maxNumber" placeholder="بیشترین مقدار">
    </div>

    <!-- تنظیمات مربوط به دراپ دان -->
    <div ng-show="c.control.active.type == 4" class="field">

        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.dropdown.multiSelectDropdown">
                {{'چند انتخابی' | translate}}
            </sadaf-checkbox>
        </div>

        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.dropdown.useRemoteData" ng-change="c.control.resetListValue()">
                استفاده از داده‌های ریموت
            </sadaf-checkbox>
        </div>

        <div class="field" ng-show="!c.control.active.dropdown.useRemoteData">
            <label>مقادیر قابل انتخاب</label>
            <textarea layout-fill
                      ng-model="c.control.active.dropdown.itemsTemp"
                      ng-change="c.control.createItems(c.control.active)"
                      placeholder="هر خط یک مقدار" rows="5"></textarea>
        </div>

        <div ng-if="c.control.active.dropdown.useRemoteData">
            <select-datasource-columns ng-model="c.control.active.dropdown"></select-datasource-columns>
        </div>

    </div>

    <!-- تنظیمات مربوط به کنترل عددی -->
    <div ng-show="c.control.active.type == 2 || c.control.active.type == 5 || c.control.active.type == 16|| c.control.active.type == 17" class="field">
        <div class="inline fields">
            <label>فرمت نمایش</label>
            <sm-dropdown items="[{key:'سفارشی', value:'سفارشی'}
                                 , {key:'.0%', value:'%'}
                                 , {key:',.1%', value:'#,#.0%'}
                                 , {key:',.2%', value:'#,#.00%'}
                                 , {key:',.0f', value:'#,#'}
                                 , {key:',.1f', value:'#,#:0'}
                                 , {key:',.2f', value:'#,#:00'}
                                 , {key:'', value:'عادی'},]"
                         class=""
                         model="c.control.active.format" label="item.value" value="item.key"></sm-dropdown>
        </div>


        <div class="inline fields" ng-hide="c.control.active.type == 2">
            <label class="wide four field">متن قبل</label>
            <input ng-model="c.control.active.prefix" placeholder="متن قبل">
        </div>

        <div class="inline fields" ng-hide="c.control.active.type == 2">
            <label class="wide four field">متن بعدی</label>
            <input ng-model="c.control.active.postfix" placeholder="متن بعدی">
        </div>

    </div>

    <!-- تنظیمات مربوط به ارجاع به فرم -->
    <div ng-show="c.control.active.type == 12" class="field">

        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.formLookup.showAddButton" ng-change="c.control.resetListValue()">
                نمایش دکمه امکان ایجاد رکورد جدید
            </sadaf-checkbox>
        </div>


        <div class="field">
            <form-lookup-property ng-model="c.control.active.formLookup"></form-lookup-property>
        </div>

        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.useFilter" ng-change="c.control.resetListValue()">
                استفاده از فیلتر
            </sadaf-checkbox>
            <filter-property ng-show="c.control.active.useFilter" name="c.control.active.name" 
                             ng-model="c.control.active.filters" 
                             source-fields="c.control.active.formLookup.formLookupSourceFields" 
                             controls="c.activeSibling"></filter-property>
        </div>

    </div>

    <!-- تنظیمات مربوط به فرم چند ردیفه -->
    <div ng-show="c.control.active.type == 13" class="field">
        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.multiRowForm.separator">
                نمایش خط جدا کننده بین ردیف‌ها
            </sadaf-checkbox>
        </div>

        <div class="inline fields">
            <label>تعداد ستون‌های فرم</label>
            <sm-dropdown items="[1,2,3,4,5,6,8]" model="c.control.active.multiRowForm.columns" label="item  + ' ستونه'" value="item" ng-init="c.control.active.multiRowForm.columns = 2"></sm-dropdown>
        </div>

        <div class="inline fields">
            <label>اندازه کنترل‌ها</label>
            <control-size ng-model="c.control.active.multiRowForm.controlSize"></control-size>
        </div>

        <div class="field">
            <label>متن کلید اضافه کردن ردیف</label>
            <input ng-model="c.control.active.multiRowForm.addKeyText" placeholder="ردیف جدید">
        </div>



    </div>

    <!-- تنظیمات مربوط به کلید -->
    <div ng-show="c.control.active.type == 15" class="field">

        <div class="inline fields">
            <label>رنگ</label>
            <sm-dropdown items="[{label:'قرمز', value:'red'},
                                 {label:'نارنجی', value:'orange'},
                                 {label:'زرد', value:'yellow'},
                                 {label:'فسفری', value:'olive'},
                                 {label:'سبز', value:'green'},
                                 {label:'سبز تیره', value:'teal'},
                                 {label:'آبی', value:'blue'},
                                 {label:'بنفش تیره', value:'violet'},
                                 {label:'بنفش', value:'purple'},
                                 {label:'صورتی', value:'pink'},
                                 {label:'قهوه‌ای', value:'brown'},
                                 {label:'خاکستری', value:'grey'},
                                 {label:'مشکی', value:'black'}]"
                         class=""
                         model="c.control.active.button.colorClass" label="item.label" value="item.value"></sm-dropdown>
        </div>

        <div class="inline fields">
            <label>اندازه</label>
            <control-size ng-model="c.control.active.button.size"></control-size>
        </div>

        <div class="inline fields">
            <label>نوع</label>
            <sm-dropdown items="[{label:'رفتن به صفحه داشبورد', value:0}, {label:'داده فرمی جدید', value:1}, {label:'اجرای وب سرویس', value:2}]"
                         class=""
                         model="c.control.active.button.type" label="item.label" value="item.value"></sm-dropdown>
        </div>

        <div class="field" ng-show="c.control.active.button.type == 0">
            <label>انتخاب صفحه داشبورد</label>
            <select-menu ng-model="c.control.active.button.dashboardId"></select-menu>
        </div>

        <div class="field" ng-show="c.control.active.button.type == 0">
            <sm-dropdown items="[{label:'باز کردن در صفحه جدید', value:0}, {label:'باز کردن در صفحه جاری', value:1}]"
                         class=""
                         model="c.control.active.button.openLinkType" label="item.label" value="item.value"></sm-dropdown>
        </div>


        <div class="field" ng-show="c.control.active.button.type == 1">
            <form-lookup-property ng-model="c.control.active.button.formInfo" settings="{selectableColumns:false}"></form-lookup-property>
        </div>

        <div class="field" ng-show="c.control.active.button.type == 2">
            <label>آدرس وب سرویس</label>
            <input ng-model="c.control.active.button.webserviceUrl" placeholder="آدرس وب سرویس">
        </div>

    </div>

    <!-- فیلد محاسباتی -->
    <div ng-show="c.control.active.type == 5" class="field">

        <div class="field">
            <label>کنترل‌های قابل استفاده</label>
            <div class="ui mini labels">
                <div class="ui label pointer" ng-repeat="f in c.activeSibling.row track by $index"
                     ng-show="f.type === 2 || f.type == 8 || f.type == 9|| f.type == 14 || ((f.type === 5 || f.type == 16) && f.name !== c.control.active.name && $index < c.activeSibling.index )"
                     ng-click="c.control.active.calculate.expression = c.control.active.calculate.expression + '['+ f.name + ']'">
                    {{f.name}} {{f.label}}
                </div>
            </div>
        </div>

        <div class="field">
            <label>فرمول</label>
            <textarea class="code ltr" ng-model="c.control.active.calculate.expression"></textarea>
        </div>

    </div>

    <!-- فیلد محاسباتی - مجموع -->
    <div ng-show="c.control.active.type == 16" class="field">
        <div class="inline fields">
            <label>تابع تجمیع</label>
            <sm-dropdown items="['sum','avg','var']" model="c.control.active.calculate.func" ng-init="c.control.active.calculate.func = 'sum'"></sm-dropdown>
        </div>
        <div class="field">
            <label>کنترل‌های قابل استفاده</label>
            <div class="ui mini labels">
                <div class="ui label pointer" ng-repeat="f in c.controlList track by $index"
                     ng-show="f.childOfMultiRow && (f.type === 2 || f.type === 5)"
                     ng-click="c.control.active.calculate.expression = c.control.active.calculate.expression + c.control.active.calculate.func+'(['+ f.name + '])'">
                    {{f.name}} {{f.label}}
                </div>
            </div>
        </div>

        <div class="field">
            <label>فرمول</label>
            <textarea class="code ltr" ng-model="c.control.active.calculate.expression"></textarea>
        </div>

    </div>

    <!-- تنظیمات مربوط به کنترل دسترسی -->
    <div ng-hide="c.control.active.dontShowAccessControl" class="field">
        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.accessControlView" label="کنترل دسترسی نمایش">کنترل دسترسی نمایش</sadaf-checkbox>
        </div>

        <div class="field" ng-show="c.control.active.accessControlView">
            <select-roles ng-model="c.control.active.accessControlViewRoles"></select-roles>
            <div><small>تنها کاربرانی اجازه <b>مشاهده</b> این کنترل را دارند که یکی از نقش‌های بالا را داشته باشند</small></div>
        </div>

        <div class="field">
            <sadaf-checkbox ng-model="c.control.active.accessControlEdit" label="کنترل دسترسی ویرایش">کنترل دسترسی ویرایش</sadaf-checkbox>
        </div>

        <div class="field" ng-show="c.control.active.accessControlEdit">
            <select-roles ng-model="c.control.active.accessControlEditRoles"></select-roles>
            <div><small>تنها کاربرانی اجازه <b>ویرایش</b> این کنترل را دارند که یکی از نقش‌های بالا را داشته باشند</small></div>
        </div>

    </div>

    <!-- تنظیمات مربوط به فیلد مربوط به ارجاع به فرم -->
    <div ng-show="c.control.active.type == 17" class="field">

        <div class="field">
            <table-lookup ng-model="c.control.active.tableLookup" controls="c.activeSibling"></table-lookup>
        </div>

    </div>

</div>


<!-- تنظیمات صفحه -->
<div ng-show="!c.control.active.name" class="ui tiny form">
    <!--<p><b>{{'تنظیمات' | translate}}</b> {{c.pages.activePage.name}}</p>-->

    <div class="field">
        <label>نام صفحه</label>
        <input ng-model="c.pages.activePage.name" placeholder="نام صفحه">
    </div>

    <div class="field">
        <sadaf-checkbox ng-model="c.pages.activePage.rowValidation.uniqueMultiField" label="">مقدار یکتا برای ترکیب فیلد‌ها</sadaf-checkbox>
    </div>

    <div ng-show="c.pages.activePage.rowValidation.uniqueMultiField" class="field">
        <div class="ui icon mini button field" ng-click="c.pages.activePage.rowValidation.uniques.push([])">
            {{'add' | translate}}
            <i class="icon add"></i>
        </div>
        <div class="fields" ng-repeat="f in c.pages.activePage.rowValidation.uniques track by $index">
            <div class="twelve wide field">
                <sm-dropdown class="selection multiple search xfluid" model="f" items="c.controlList" label="item.label" value="item.name"></sm-dropdown>
            </div>

            <div class="one wide field" ng-show="c.pages.activePage.rowValidation.uniques.length != 1">
                <i class="icon remove" ng-click="c.pages.activePage.rowValidation.uniques.splice($index,1)"></i>
            </div>
        </div>
    </div>

    <div class="inline fields">
        <label>اندازه کنترل‌ها</label>
        <sm-dropdown items="[{label:'خیلی کوچک', value:'mini'}, {label:'کوچک', value:'tiny'}, {label:'معمولی', value:''}]"
                     class="selection fluid "
                     model="c.pages.activePage.size" label="item.label" value="item.value" ng-init="c.control.active.multiRowForm.controlSize = ''"></sm-dropdown>
    </div>

</div>
