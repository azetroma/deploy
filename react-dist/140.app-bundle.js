/*! For license information please see 140.app-bundle.js.LICENSE.txt */
"use strict";(self.webpackChunksadaf=self.webpackChunksadaf||[]).push([[140],{49140:(t,o,s)=>{s.r(o),s.d(o,{default:()=>n});var e=s(53481),i=function(){return!0};e.Map.SelectArea=e.Map.BoxZoom.extend({statics:{SELECT_AREA_SELECTED:"selectarea:selected",SELECT_AREA_START:"selectarea:start",SELECT_AREA_TOGGLED:"selectarea:toggled"},options:{shiftKey:!1,ctrlKey:!0,validate:i,autoDisable:!1,cursor:"crosshair"},initialize:function(t,o){e.Util.setOptions(this,o||{}),e.Map.BoxZoom.prototype.initialize.call(this,t),this._validate=null,this._moved=!1,this._autoDisable=!this.options.ctrlKey&&this.options.autoDisable,this._lastLayerPoint=null,this._beforeCursor=null,this.setValidate(this.options.validate),this.setAutoDisable(this.options.autoDisable)},setValidate:function(t){var o=this;return"function"!=typeof t&&(t=i),this._validate=function(s){return t.call(o,s)},this},setAutoDisable:function(t){this._autoDisable=!!t},setControlKey:function(t){var o=this._enabled;o&&this.disable(),this.options.ctrlKey=!!t,t&&(this.options.shiftKey=!1),o&&this.enable()},setShiftKey:function(t){var o=this._enabled;o&&this.disable(),this.options.shiftKey=!!t,t&&(this.options.ctrlKey=!1),o&&this.enable()},enable:function(t,o){this.options.shiftKey?this._map.boxZoom&&this._map.boxZoom.disable():this.options.ctrlKey||this._map.dragging.disable(),e.Map.BoxZoom.prototype.enable.call(this),this.options.ctrlKey||this._setCursor(),t&&this.setValidate(t),this.setAutoDisable(o),this._map.fire(e.Map.SelectArea.SELECT_AREA_TOGGLED)},disable:function(){e.Map.BoxZoom.prototype.disable.call(this),this.options.ctrlKey||this._restoreCursor(),this.options.shiftKey?this._map.boxZoom&&this._map.boxZoom.enable():this._map.dragging.enable(),this._map.fire(e.Map.SelectArea.SELECT_AREA_TOGGLED)},addHooks:function(){e.Map.BoxZoom.prototype.addHooks.call(this),e.DomEvent.on(document,"keyup",this._onKeyUp,this).on(document,"keydown",this._onKeyPress,this).on(document,"contextmenu",this._onMouseDown,this).on(window,"blur",this._onBlur,this),this._map.on("dragstart",this._onMouseDown,this)},removeHooks:function(){e.Map.BoxZoom.prototype.removeHooks.call(this),e.DomEvent.off(document,"keyup",this._onKeyUp,this).off(document,"keydown",this._onKeyPress,this).off(document,"contextmenu",this._onMouseDown,this).off(window,"blur",this._onBlur,this),this._map.off("dragstart",this._onMouseDown,this)},_onMouseDown:function(t){if(this._moved=!1,this._lastLayerPoint=null,this.options.shiftKey&&!t.shiftKey||this.options.ctrlKey&&!t.ctrlKey||1!==t.which&&1!==t.button)return!1;e.DomEvent.stop(t);var o=this._map.mouseEventToLayerPoint(t);if(!this._validate(o))return!1;e.DomUtil.disableTextSelection(),e.DomUtil.disableImageDrag(),this._startLayerPoint=o,e.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).on(document,"keydown",this._onKeyDown,this)},_onMouseMove:function(t){this._moved||(this._box=e.DomUtil.create("div","leaflet-zoom-box",this._pane),e.DomUtil.setPosition(this._box,this._startLayerPoint),this._map.fire(e.Map.SelectArea.SELECT_AREA_START));var o=this._startLayerPoint,s=this._box,i=this._map.mouseEventToLayerPoint(t),n=i.subtract(o);if(this._validate(i)){this._lastLayerPoint=i;var a=new e.Point(Math.min(i.x,o.x),Math.min(i.y,o.y));e.DomUtil.setPosition(s,a),this._moved=!0,s.style.width=Math.max(0,Math.abs(n.x)-4)+"px",s.style.height=Math.max(0,Math.abs(n.y)-4)+"px"}},_onKeyUp:function(t){27===t.keyCode?this._moved&&this._box&&this._finish():this.options.ctrlKey&&(this._restoreCursor(),this._map.dragging.enable())},_onKeyPress:function(t){this.options.ctrlKey&&(t.ctrlKey||"dragstart"===t.type)&&null===this._beforeCursor&&(this._setCursor(),this._map.dragging._draggable._onUp(t),this._map.dragging.disable())},_onBlur:function(t){this._restoreCursor(),this._map.dragging.enable()},_setCursor:function(){this._beforeCursor=this._container.style.cursor,this._container.style.cursor=this.options.cursor},_restoreCursor:function(){this._container.style.cursor=this._beforeCursor,this._beforeCursor=null},_onMouseUp:function(t){this._finish();var o=this._map,s=this._lastLayerPoint;if(s&&!this._startLayerPoint.equals(s)){e.DomEvent.stop(t);var i=o.layerPointToLatLng(this._startLayerPoint),n=o.layerPointToLatLng(s),a=new e.LatLngBounds(i,n);this._autoDisable?this.disable():this._restoreCursor(),this._moved=!1,e.Util.requestAnimFrame((function(){o.fire(e.Map.SelectArea.SELECT_AREA_SELECTED,{bounds:a,start:i,end:n})}))}}}),e.Map.mergeOptions({selectArea:!1}),e.Map.addInitHook("addHandler","selectArea",e.Map.SelectArea);const n=e.Map.SelectArea}}]);