(self.webpackChunksadaf=self.webpackChunksadaf||[]).push([[592],{33592:()=>{L.BingLayer.mergeOptions({applyMaxNativeZoom:"auto",applyMaxNativeZoom_validityRadius:1e7}),L.BingLayer.addInitHook((function(){var a=this.options;"auto"!==a.applyMaxNativeZoom||a.maxNativeZoom||(a.applyMaxNativeZoom="Road"===a.imagerySet||"Aerial"===a.imagerySet.substring(0,6)),a.applyMaxNativeZoom&&this.on("add",(function(){this.applyMaxNativeZoom(this._map.getCenter())}))})),L.BingLayer.include({applyMaxNativeZoom:function(a){var t=this.options,e=this._makeApiUrl("Imagery/BasicMetadata",L.Util.template("{imagerySet}/{centerPoint}",{imagerySet:t.imagerySet,centerPoint:L.Util.template("{lat},{lng}",a)})),i=t.zoomOffset||0;return this._findVintage(e,t.maxZoom+i,(function(e){if(e&&this._map){var o=this._map.getCenter(),n=this.options.applyMaxNativeZoom_validityRadius;if(o.distanceTo(a)>n)this.applyMaxNativeZoom(o);else{e-=i;var s=t.maxNativeZoom||t.maxZoom;t.maxNativeZoom=e;var m=this._map.getZoom();(e<s&&e<m||e>s&&m>s)&&this._resetView(),this.fire("maxNativeZoomApplied",{latlng:a,value:e,oldValue:s})}}})),this},_findVintage:function(a,t,e,i){this.callRestService(a+"&zoomLevel="+t,(function(o){if(o.resourceSets[0].resources[0].vintageStart||0===t)return e.call(i||this,t);this._findVintage(a,t-1,e,i)}))}})}}]);