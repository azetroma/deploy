(self.webpackChunksadaf=self.webpackChunksadaf||[]).push([[592],{33592:function(){L.BingLayer.mergeOptions({applyMaxNativeZoom:"auto",applyMaxNativeZoom_validityRadius:1e7}),L.BingLayer.addInitHook((function(){var a=this.options;"auto"!==a.applyMaxNativeZoom||a.maxNativeZoom||(a.applyMaxNativeZoom="Road"===a.imagerySet||"Aerial"===a.imagerySet.substring(0,6)),a.applyMaxNativeZoom&&this.on("add",(function(){this.applyMaxNativeZoom(this._map.getCenter())}))})),L.BingLayer.include({applyMaxNativeZoom:function(a){var t=this.options,i=this._makeApiUrl("Imagery/BasicMetadata",L.Util.template("{imagerySet}/{centerPoint}",{imagerySet:t.imagerySet,centerPoint:L.Util.template("{lat},{lng}",a)})),e=t.zoomOffset||0;return this._findVintage(i,t.maxZoom+e,(function(i){if(i&&this._map){var o=this._map.getCenter(),n=this.options.applyMaxNativeZoom_validityRadius;if(o.distanceTo(a)>n)this.applyMaxNativeZoom(o);else{i-=e;var s=t.maxNativeZoom||t.maxZoom;t.maxNativeZoom=i;var m=this._map.getZoom();(i<s&&i<m||i>s&&m>s)&&this._resetView(),this.fire("maxNativeZoomApplied",{latlng:a,value:i,oldValue:s})}}})),this},_findVintage:function(a,t,i,e){this.callRestService(a+"&zoomLevel="+t,(function(o){if(o.resourceSets[0].resources[0].vintageStart||0===t)return i.call(e||this,t);this._findVintage(a,t-1,i,e)}))}})}}]);